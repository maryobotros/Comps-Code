<!doctype html>
<html>
   <head>
      <title>Communicating from Node.js to an Arduino</title>
      <script src='https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js'></script>
   </head>
   <body>

      <h1 id="title">Smart Blinds</h1>

      <!-- Buttons for the different modes  -->
      <button id="lightOn" onclick="phototransistor()">Phototransistor Mode</button>
      <button id="lightOff" onclick="potentiometer()">Potentiometer Mode</button>
      <button id="lightMiddle" onclick="temperature()">Temperature Mode</button>

      <!-- Status indicators -->
      <p id="mode">Mode: Select a mode</p> 
      <p id="status"></p> 

      <!-- Adjust settings for the potentiometer -->
      <div>
         <input id="input-text" type="text" placeholder="Enter potentiometer threshold" maxlength="32">
         <input id="send-text" type="submit" value="Set potentiometer threshold">
      </div>

      <!-- Adjust settings for the temperature -->
      <div>
         <input id="input-temp" type="text" placeholder="Enter temperature threshold" maslength="32">
         <input id="send-temp" type="submit" value="Set temperature threshold"> 
      </div>

      <script>
         // Initializing socket variable
         var socket = io();

         // Logging all data gathered from socket
         socket.on('data', function(data){
            console.log(data);

            if(data == "Closed"){
               document.getElementById("status").innerHTML = "Status: Closed";
            }
            else if(data == "Open"){
               document.getElementById("status").innerHTML = "Status: Open";
            }
         });

         // When phototransistor is clicked
         function phototransistor(){
            document.getElementById("mode").innerHTML = "Mode: Phototrasistor";
            socket.emit('lights', { "status":"1" });
         }

         // When potentiometer is clicked
         function potentiometer(){
            document.getElementById("mode").innerHTML = "Mode: Potentiometer";
            socket.emit('lights', { "status":"0" });
         }

         // When temperature is clicked
         function temperature(){
            document.getElementById("mode").innerHTML = "Mode: Temperature";
            socket.emit('lights', {"status":"2"});
         }

         // Setting the potentiometer threshold
         var sendTextButton = document.getElementById("send-text");

         sendTextButton.addEventListener("click", function(){
            var sendText = document.getElementById("input-text").value;
            socket.emit('input-text', sendText)
         });

         // Setting the temperature threshold
         var sendTempButton = document.getElementById("send-temp");

         sendTempButton.addEventListener("click", function(){
            var sendTemp = document.getElementById("input-temp").value;
            socket.emit('input-temp', sendTemp)
         });

      </script>


      <style>
         *{
            background-color: black;
         }

         #title{
            color:white;
         }
         
         #lightOn, #lightOff, #lightMiddle{
            background-color:rgb(255, 255, 255);
            color:rgb(82, 82, 82);
            border-radius:5px;
            border-color:gray;
         }

         #mode, #status, #input-text, #send-text, #input-temp, #send-temp{
            color:white;
         }
      </style>

   </body>
</html>