<!doctype html>
<html>
   <head>

      <title>Communicating from Node.js to an Arduino</title>
      <script src='https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js'></script>

   </head>
   <body>

      <h1 id="title">Smart Blinds</h1>

      <button id="lightOn" onclick="phototransistor()">Phototransistor Mode</button>
      <button id="lightOff" onclick="potentiometer()">Potentiometer Mode</button>
      <button id="lightMiddle" onclick="temperature()">Temperature Mode</button>

      <p id="mode">Mode: Potentiometer</p>
      <p id="status">hello</p>

      <input type="text" id="input-text" placeholder="add text" maxlength="32">
      <input id="send-text" type="submit" value="send text">


      <script>
         // Initializing socket variable
         var socket = io();

         // Logging all data gathered from socket
         socket.on('data', function(data){
            console.log(data);

            if(data == "Closed"){
               document.getElementById("status").innerHTML = "Status: Closed";
            }
            else if(data == "Open"){
               document.getElementById("status").innerHTML = "Status: Open";
            }
         });

         // When phototransistor is clicked
         function phototransistor(){
            document.getElementById("mode").innerHTML = "Mode: Phototrasistor";
            socket.emit('lights', { "status":"1" });
         }

         // When potentiometer is clicked
         function potentiometer(){
            document.getElementById("mode").innerHTML = "Mode: Potentiometer";
            socket.emit('lights', { "status":"0" });
         }

         // When temperature is clicked
         function temperature(){
            document.getElementById("mode").innerHTML = "Mode: Temperature";
            socket.emit('lights', {"status":"2"});
         }


         var sendTextButton = document.getElementById("send-text");

         sendTextButton.addEventListener("click", function(){
            var sendText = document.getElementById("input-text").value;
            socket.emit('input-text', sendText)
         });

      </script>

      <style>
         *{
            background-color: black;
         }

         #title{
            color:white;
         }
         
         #lightOn, #lightOff, #lightMiddle{
            background-color:rgb(255, 255, 255);
            color:rgb(82, 82, 82);
            border-radius:5px;
            border-color:gray;
         }

         #mode, #status, #input-text, #send-text{
            color:white;
         }
      </style>

   </body>
</html>